<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interview Study Plan</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container my-5">
    <h1 class="text-center mb-4">ğŸ“š Interview Study Plan (1 - 1.5 Weeks)</h1>

    <div class="mb-3">
        <input type="text" class="form-control" id="subPlanInput" placeholder="Nháº­p káº¿ hoáº¡ch nhá» (vÃ­ dá»¥: Kiá»ƒm tra láº¡i Spring Boot Config)">
        <button class="btn btn-success mt-2" onclick="addSubPlan()">ThÃªm Káº¿ Hoáº¡ch Nhá»</button>
    </div>

    <div id="subPlans" class="mb-4"></div>

    <div id="plan"></div>

    <button class="btn btn-primary mt-4" onclick="markAllDone()">Mark All as Done</button>
</div>

<script>
const STORAGE_KEY_MAIN = "interview_plan_status";
const STORAGE_KEY_SUB = "sub_plans";

const planData = [
    { day: 1, topic: "Microservices & Kiáº¿n trÃºc", knowledge: ["Microservices vs Monolithic", "Æ¯u/NhÆ°á»£c Ä‘iá»ƒm, Anti-patterns", "API Gateway, Circuit Breaker, Saga, CQRS"], questions: ["Táº¡i sao chá»n Microservices?", "Giao tiáº¿p giá»¯a cÃ¡c service nhÆ° tháº¿ nÃ o?"] },
    { day: 2, topic: "Spring Boot Core & Cáº¥u trÃºc Dá»± Ãn", knowledge: ["Spring Context, Dependency Injection, Bean Lifecycle", "Annotation: @Component, @Service, @Repository, @Controller, @RestController, @Configuration", "Cáº¥u trÃºc chuáº©n project Spring Boot"], questions: ["Khi nÃ o dÃ¹ng @Component vÃ  @Bean?", "Bean Ä‘Æ°á»£c khá»Ÿi táº¡o nhÆ° tháº¿ nÃ o?"] },
    { day: 3, topic: "Spring Boot Advanced & Exception Handling", knowledge: ["@Transactional, Propagation & Isolation", "Exception Handling: @ControllerAdvice, @ExceptionHandler", "Validation: @Valid, Custom Validator"], questions: ["Khi nÃ o rollback khÃ´ng hoáº¡t Ä‘á»™ng?", "Xá»­ lÃ½ Exception trong REST API nhÆ° tháº¿ nÃ o?"] },
    { day: 4, topic: "Spring Security & OAuth2 (Optional)", knowledge: ["Authentication vs Authorization", "JWT Token Flow, OAuth2 Flow", "Spring Security Filter Chain"], questions: ["JWT cÃ³ nhÆ°á»£c Ä‘iá»ƒm gÃ¬?", "Khi nÃ o nÃªn dÃ¹ng OAuth2?"] },
    { day: 5, topic: "PostgreSQL", knowledge: ["MVCC, Transaction Isolation Levels", "Indexing: B-Tree, GiST, GIN", "Query Execution Plan (EXPLAIN ANALYZE)"], questions: ["Khi nÃ o Index khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng?", "Giáº£i thÃ­ch MVCC vÃ  Vacuum."] },
    { day: 6, topic: "Redis & Caching Patterns", knowledge: ["Redis Data Structures", "Cache Aside, Write Through, Write Behind", "TTL, Eviction Policies: LRU, LFU, FIFO"], questions: ["Khi nÃ o cache bá»‹ stale?", "Redis cÃ³ pháº£i luÃ´n lÃ  lá»±a chá»n tá»‘t?"] },
    { day: 7, topic: "Kafka", knowledge: ["Kafka Architecture", "Consumer Groups, Message Ordering", "At-least-once, Exactly-once semantics"], questions: ["Khi nÃ o xáº£y ra message loss?", "Kafka vÃ  RabbitMQ khÃ¡c nhau nhÆ° tháº¿ nÃ o?"] },
    { day: 8, topic: "Elasticsearch & Logging", knowledge: ["Elasticsearch Concepts", "Query vs Filter Context", "Logging Stack: ELK/EFK"], questions: ["Khi nÃ o khÃ´ng nÃªn dÃ¹ng Elasticsearch?", "LÃ m sao Ä‘áº£m báº£o káº¿t quáº£ tÃ¬m kiáº¿m nhanh?"] },
    { day: 9, topic: "Java Core Ã”n Táº­p", knowledge: ["OOP, SOLID, Design Patterns", "Collections: List, Map, Set", "Concurrency: Thread, Runnable, synchronized, volatile"], questions: ["Khi nÃ o dÃ¹ng HashMap vs ConcurrentHashMap?", "Giáº£i thÃ­ch synchronized vÃ  volatile."] },
    { day: 10, topic: "Tá»•ng Káº¿t & Mock Interview", knowledge: ["Review toÃ n bá»™ topic", "Giáº£i thÃ­ch nhanh 3-5 phÃºt má»—i chá»§ Ä‘á»", "Chuáº©n bá»‹ tÃ¬nh huá»‘ng dá»± Ã¡n"], questions: ["Váº¥n Ä‘á» gáº·p pháº£i vÃ  cÃ¡ch giáº£i quyáº¿t?", "LÃ½ do chá»n giáº£i phÃ¡p ká»¹ thuáº­t?"] }
];

function saveMainPlanStatus() {
    const status = {};
    planData.forEach(item => {
        status[`day-${item.day}`] = document.getElementById(`day-${item.day}`).checked;
    });
    localStorage.setItem(STORAGE_KEY_MAIN, JSON.stringify(status));
}

function loadMainPlanStatus() {
    const status = JSON.parse(localStorage.getItem(STORAGE_KEY_MAIN));
    if (status) {
        for (const [id, checked] of Object.entries(status)) {
            const checkbox = document.getElementById(id);
            if (checkbox) checkbox.checked = checked;
        }
    }
}

function renderPlan() {
    const planContainer = document.getElementById('plan');
    planData.forEach(item => {
        planContainer.innerHTML += `
        <div class="card mb-3">
            <div class="card-header bg-primary text-white">
                âœ… NgÃ y ${item.day}: ${item.topic} <input type="checkbox" class="form-check-input float-end" id="day-${item.day}" onchange="saveMainPlanStatus()">
            </div>
            <div class="card-body">
                <h5>ğŸ“– Kiáº¿n thá»©c:</h5>
                <ul>${item.knowledge.map(k => `<li>${k}</li>`).join('')}</ul>
                <h5>â“ Tá»± há»i:</h5>
                <ul>${item.questions.map(q => `<li>${q}</li>`).join('')}</ul>
            </div>
        </div>`;
    });
}

function markAllDone() {
    planData.forEach(item => {
        document.getElementById(`day-${item.day}`).checked = true;
    });
    saveMainPlanStatus();
}

function addSubPlan() {
    const input = document.getElementById('subPlanInput');
    const value = input.value.trim();
    if (value) {
        const subPlans = JSON.parse(localStorage.getItem(STORAGE_KEY_SUB)) || [];
        subPlans.push({ id: `sub-${Date.now()}`, text: value, done: false });
        localStorage.setItem(STORAGE_KEY_SUB, JSON.stringify(subPlans));
        input.value = '';
        renderSubPlans();
    }
}

function toggleSubPlan(id) {
    const subPlans = JSON.parse(localStorage.getItem(STORAGE_KEY_SUB)) || [];
    const updatedPlans = subPlans.map(plan => plan.id === id ? { ...plan, done: !plan.done } : plan);
    localStorage.setItem(STORAGE_KEY_SUB, JSON.stringify(updatedPlans));
}

function renderSubPlans() {
    const subPlansContainer = document.getElementById('subPlans');
    subPlansContainer.innerHTML = '';
    const subPlans = JSON.parse(localStorage.getItem(STORAGE_KEY_SUB)) || [];
    subPlans.forEach(plan => {
        subPlansContainer.innerHTML += `
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="${plan.id}" ${plan.done ? 'checked' : ''} onchange="toggleSubPlan('${plan.id}')">
                <label class="form-check-label" for="${plan.id}">${plan.text}</label>
            </div>`;
    });
}

document.addEventListener('DOMContentLoaded', () => {
    renderPlan();
    loadMainPlanStatus();
    renderSubPlans();
});
</script>
</body>
</html>
